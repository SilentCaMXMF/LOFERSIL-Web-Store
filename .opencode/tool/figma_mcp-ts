#!/usr/bin/env -S deno run --allow-env --allow-run

/**
 * Figma MCP Tool for OpenCode
 * Allows the agent to use Figma design automation via MCP server
 */

import { run } from "https://deno.land/x/opencode_tools@0.1.0/mod.ts";

const mcpConfig = ".opencode/mcp.config.json";

/**
 * Run a Figma MCP command
 * @param args Array of command arguments to pass to the MCP server
 */
export async function figmaMCP(args: string[] = []) {
  const result = await run({
    mcpServer: "Figma MCP",
    mcpConfig,
    args,
    captureOutput: true
  });

  return result.stdout;
}

// Example usage
if (import.meta.main) {
  const designId = Deno.args[0];
  const output = await figmaMCP(["export", designId]);
  console.log(output);
}